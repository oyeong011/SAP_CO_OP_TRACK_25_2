
*&---------------------------------------------------------------------*

*& Report ZEDR21_005

*&---------------------------------------------------------------------*

*&

*&---------------------------------------------------------------------*




REPORT ZEDR21_005.



"LOOP # ##






*DATA : BEGIN OF GS_STUDENT,

*  ZPERNR21 TYPE C LENGTH 10,

*  ZCODE21 TYPE C LENGTH 10,

*  ZKNAME21 TYPE C LENGTH 10,

*  ZENAME21 TYPE C LENGTH 10,

*  ZGUBUN21 TYPE C LENGTH 10,

*  ZGNAME21 TYPE C LENGTH 4,

*  ZTEL21 TYPE C LENGTH 10,

*  END OF GS_STUDENT.

*

*  DATA : GT_STUDENT LIKE TABLE OF GS_STUDENT.

*

*  CLEAR : GS_STUDENT, GT_STUDENT.

*

*  GS_STUDENT-ZPERNR21 = '0000000001'.

*  GS_STUDENT-ZCODE21 = 'SSU-01'.

*  GS_STUDENT-ZKNAME21 = '###'.

*  GS_STUDENT-ZENAME21 = 'DONG'.

*  GS_STUDENT-ZGUBUN21 = 'M'.

*  GS_STUDENT-ZTEL21 = '01011112222'.

*  APPEND GS_STUDENT TO GT_STUDENT.

*

*  CLEAR : GS_STUDENT.

*  GS_STUDENT-ZPERNR21 = '0000000002'.

*  GS_STUDENT-ZCODE21 = 'SSU-02'.

*  GS_STUDENT-ZKNAME21 = '###'.

*  GS_STUDENT-ZENAME21 = 'HOON'.

*  GS_STUDENT-ZGUBUN21 = 'M'.

*  GS_STUDENT-ZTEL21 = '01022223333'.

*  APPEND GS_STUDENT TO GT_STUDENT.

*

*  CLEAR : GS_STUDENT.

*  GS_STUDENT-ZPERNR21 = '0000000003'.

*  GS_STUDENT-ZCODE21 = 'SSU-03'.

*  GS_STUDENT-ZKNAME21 = '###'.

*  GS_STUDENT-ZENAME21 = 'SON'.

*  GS_STUDENT-ZGUBUN21 = 'F'.

*  GS_STUDENT-ZTEL21 = '01033334444'.

*  APPEND GS_STUDENT TO GT_STUDENT.

*"LOOP### HEADER CLEAR

*  CLEAR : GS_STUDENT.




"## LOOP#




*  LOOP AT GT_STUDENT INTO GS_STUDENT.

*    IF GS_STUDENT-ZGUBUN21 = 'M'.

*      GS_STUDENT-ZGNAME21 = '##'.

*    ELSEIF GS_STUDENT-ZGUBUN21 = 'F'.

*      GS_STUDENT-ZGNAME21 = '##'.

*    ELSE.

*      GS_STUDENT-ZGNAME21 = '##'.

*    ENDIF.

*

*    "### ## ### LOOP ### # HEADER CLEAR

*    CLEAR : GS_STUDENT.

*    ENDLOOP.

*  APPEND GS_STUDENT TO GT_STUDENT.

*  BREAK-POINT.






"LOOP# ## # ## WHERE FIELD = 'VALUE'. BUT ##




*  LOOP AT GT_STUDENT INTO GS_STUDENT WHERE ZGUBUN21 = 'F'.

*    IF GS_STUDENT-ZGUBUN21 = 'M'.

*      GS_STUDENT-ZGNAME21 = '##'.

*    ELSEIF GS_STUDENT-ZGUBUN21 = 'F'.

*      GS_STUDENT-ZGNAME21 = '##'.

*    ELSE.

*      GS_STUDENT-ZGNAME21 = '##'.

*   ENDIF.

*

*   CLEAR: GS_STUDENT.

*   ENDLOOP.



*  LOOP AT GT_STUDENT INTO GS_STUDENT WHERE ZGUBUN21 = 'F'.

*    GS_STUDENT-ZGNAME21 = '##'.

*

*    CLEAR: GS_STUDENT.

*    ENDLOOP.

*

*    LOOP AT GT_STUDENT INTO GS_STUDENT.

*      IF GS_STUDENT-ZGUBUN21 = 'F'.

*        GS_STUDENT-ZGNAME21 = '##'.

*      ENDIF.

*

*      CLEAR : GS_STUDENT.

*     ENDLOOP.








      "LOOP# INDEX# ##




*     LOOP AT GT_STUDENT INTO GS_STUDENT FROM 2 TO 3.

*       IF GS_STUDENT-ZGUBUN21 = 'M'.

*         GS_STUDENT-ZGNAME21 = '##'.

*      ELSEIF GS_STUDENT-ZGUBUN21 = 'F'.

*        GS_STUDENT-ZGNAME21 = '##'.

*      ELSE.

*        GS_STUDENT-ZGNAME21 = '##'.

*     ENDIF.

*

*     CLEAR : GS_STUDENT.

*

*    ENDLOOP.

*    BREAK-POINT.

*

* ===============================================================================================






"INTERNAL TABLE ##




*DATA : BEGIN OF GS_STUDENT,

*  ZPERNR21 LIKE ZEDT21_001-ZPERNR21,

*  ZCODE21 LIKE ZEDT21_001-ZCODE21,

*  ZKNAME21 LIKE ZEDT21_001-ZKNAME21,

*  ZENAME21 LIKE ZEDT21_001-ZENAME21,

*  ZGUBUN21 LIKE ZEDT21_001-ZGUBUN21,

*  ZGNAME21 TYPE C LENGTH 4,

*  ZTEL21 LIKE ZEDT21_001-ZTEL21,

*  END OF GS_STUDENT.

*

*  DATA : GT_STUDENT LIKE TABLE OF GS_STUDENT WITH NON-UNIQUE KEY ZCODE21.

*

*  CLEAR : GS_STUDENT, GT_STUDENT.

*

*   GS_STUDENT-ZPERNR21 = '0000000001'.

*   GS_STUDENT-ZCODE21 = 'SSU-01'.

*   GS_STUDENT-ZKNAME21 = '###'.

*   GS_STUDENT-ZENAME21 = 'DONG'.

*

*   "## ### ### ! ## ##!

*   GS_STUDENT-ZGUBUN21 = 'F'.

*

*   "### ## # ## ###

**  GS_STUDENT-ZGUBUN21 = 'M'.

**  APPEND GS_STUDENT TO GT_STUDENT.

*

*   GS_STUDENT-ZTEL21 = '01011112222'.

*   APPEND GS_STUDENT TO GT_STUDENT.

*

*   GS_STUDENT-ZENAME21 = 'KANG'.

*   GS_STUDENT-ZGUBUN21 = 'M'. "## NON-UNIQUE KEY ZCODE21 ### # ### ## #

**   MODIFY TABLE GT_STUDENT FROM GS_STUDENT. "KEY # #### ##

**   MODIFY TABLE GT_STUDENT FROM GS_STUDENT TRANSPORTING ZGUBUN21. " BODY ## ### ### ####!

*   BREAK-POINT.






"WHERE ## ## ###  INTERNAL TABLE ##






*DATA : BEGIN OF GS_STUDENT,

*  ZPERNR21 LIKE ZEDT21_001-ZPERNR21,

*  ZCODE21 LIKE ZEDT21_001-ZCODE21,

*  ZKNAME21 LIKE ZEDT21_001-ZKNAME21,

*  ZENAME21 LIKE ZEDT21_001-ZENAME21,

*  ZGUBUN21 LIKE ZEDT21_001-ZGUBUN21,

*  ZGNAME21 TYPE C LENGTH 4,

*  ZTEL21 LIKE ZEDT21_001-ZTEL21,

*  END OF GS_STUDENT.

*

*  DATA : GT_STUDENT LIKE TABLE OF GS_STUDENT WITH NON-UNIQUE KEY ZCODE21.

*

*  CLEAR : GS_STUDENT, GT_STUDENT.

*

*   GS_STUDENT-ZPERNR21 = '0000000001'.

*   GS_STUDENT-ZCODE21 = 'SSU-01'.

*   GS_STUDENT-ZKNAME21 = '###'.

*   GS_STUDENT-ZENAME21 = 'DONG'.

*   GS_STUDENT-ZGUBUN21 = 'M'.

*   GS_STUDENT-ZTEL21 = '01011112222'.

*   APPEND GS_STUDENT TO GT_STUDENT.

*

*  CLEAR : GS_STUDENT.

*

*   GS_STUDENT-ZPERNR21 = '0000000002'.

*   GS_STUDENT-ZCODE21 = 'SSU-02'.

*   GS_STUDENT-ZKNAME21 = '###'.

*   GS_STUDENT-ZENAME21 = 'HOON'.

*   GS_STUDENT-ZGUBUN21 = 'M'.

*   GS_STUDENT-ZTEL21 = '01011112222'.

*   APPEND GS_STUDENT TO GT_STUDENT.

*

*     CLEAR : GS_STUDENT.

*

*   GS_STUDENT-ZPERNR21 = '0000000003'.

*   GS_STUDENT-ZCODE21 = 'SSU-03'.

*   GS_STUDENT-ZKNAME21 = '###'.

*   GS_STUDENT-ZENAME21 = 'SON'.

*   GS_STUDENT-ZGUBUN21 = 'F'.

*   GS_STUDENT-ZTEL21 = '01033334444'.

*   APPEND GS_STUDENT TO GT_STUDENT.

*

*    LOOP AT GT_STUDENT INTO GS_STUDENT.

*    IF GS_STUDENT-ZGUBUN21 = 'M'.

*      GS_STUDENT-ZGNAME21 = '##'.

*    ELSEIF GS_STUDENT-ZGUBUN21 = 'F'.

*      GS_STUDENT-ZGNAME21 = '##'.

*    ELSE.

*      GS_STUDENT-ZGNAME21 = '##'.

*    ENDIF.

*

*    MODIFY GT_STUDENT FROM GS_STUDENT TRANSPORTING ZGNAME21 WHERE ZCODE21 = GS_STUDENT-ZCODE21.

*

*    CLEAR GS_STUDENT.

*

*    ENDLOOP.

*    BREAK-POINT.










" INDEX # ### # ## ##






*DATA : BEGIN OF GS_STUDENT,

*  ZPERNR21 LIKE ZEDT21_001-ZPERNR21,

*  ZCODE21 LIKE ZEDT21_001-ZCODE21,

*  ZKNAME21 LIKE ZEDT21_001-ZKNAME21,

*  ZENAME21 LIKE ZEDT21_001-ZENAME21,

*  ZGUBUN21 LIKE ZEDT21_001-ZGUBUN21,

*  ZGNAME21 TYPE C LENGTH 4,

*  ZTEL21 LIKE ZEDT21_001-ZTEL21,

*  END OF GS_STUDENT.

*

*  DATA : GT_STUDENT LIKE TABLE OF GS_STUDENT WITH NON-UNIQUE KEY ZCODE21.

*

*  CLEAR : GS_STUDENT, GT_STUDENT.

*

*   GS_STUDENT-ZPERNR21 = '0000000001'.

*   GS_STUDENT-ZCODE21 = 'SSU-01'.

*   GS_STUDENT-ZKNAME21 = '###'.

*   GS_STUDENT-ZENAME21 = 'DONG'.

*   GS_STUDENT-ZGUBUN21 = 'M'.

*   GS_STUDENT-ZTEL21 = '01011112222'.

*   APPEND GS_STUDENT TO GT_STUDENT.

*

*  CLEAR : GS_STUDENT.

*

*   GS_STUDENT-ZPERNR21 = '0000000002'.

*   GS_STUDENT-ZCODE21 = 'SSU-02'.

*   GS_STUDENT-ZKNAME21 = '###'.

*   GS_STUDENT-ZENAME21 = 'HOON'.

*   GS_STUDENT-ZGUBUN21 = 'M'.

*   GS_STUDENT-ZTEL21 = '01011112222'.

*   APPEND GS_STUDENT TO GT_STUDENT.

*

*     CLEAR : GS_STUDENT.

*

*   GS_STUDENT-ZPERNR21 = '0000000003'.

*   GS_STUDENT-ZCODE21 = 'SSU-03'.

*   GS_STUDENT-ZKNAME21 = '###'.

*   GS_STUDENT-ZENAME21 = 'SON'.

*   GS_STUDENT-ZGUBUN21 = 'F'.

*   GS_STUDENT-ZTEL21 = '01033334444'.

*   APPEND GS_STUDENT TO GT_STUDENT.

*

*   LOOP AT GT_STUDENT INTO GS_STUDENT.

*    IF GS_STUDENT-ZGUBUN21 = 'M'.

*      GS_STUDENT-ZGNAME21 = '##'.

*    ELSEIF GS_STUDENT-ZGUBUN21 = 'F'.

*      GS_STUDENT-ZGNAME21 = '##'.

*    ELSE.

*      GS_STUDENT-ZGNAME21 = '##'.

*    ENDIF.

*

*    MODIFY GT_STUDENT FROM GS_STUDENT INDEX SY-TABIX.

*

*    CLEAR GS_STUDENT.

*

*    ENDLOOP.

*    BREAK-POINT.






"========================================================================================



"INTERNAL TABLE ##






*DATA : GS_STUDENT TYPE ZEDT21_001.

*DATA : GT_STUDENT LIKE TABLE OF GS_STUDENT WITH NON-UNIQUE KEY ZGUBUN21.

*

*GS_STUDENT-ZPERNR21 = '0000000001'.

*GS_STUDENT-ZCODE21 = 'SSU-01'.

*GS_STUDENT-ZKNAME21 = '###'.

*GS_STUDENT-ZENAME21 = 'DONG'.

*GS_STUDENT-ZGUBUN21 = 'M'.

*GS_STUDENT-ZTEL21 = '01011112222'.

*APPEND GS_STUDENT TO GT_STUDENT.

*

*CLEAR : GS_STUDENT.

*

*GS_STUDENT-ZPERNR21 = '0000000002'.

*GS_STUDENT-ZCODE21 = 'SSU-02'.

*GS_STUDENT-ZKNAME21 = '###'.

*GS_STUDENT-ZENAME21 = 'HOON'.

*GS_STUDENT-ZGUBUN21 = 'M'.

*GS_STUDENT-ZTEL21 = '01022223333'.

*APPEND GS_STUDENT TO GT_STUDENT.

*

*CLEAR : GS_STUDENT.

*

*GS_STUDENT-ZPERNR21 = '0000000003'.

*GS_STUDENT-ZCODE21 = 'SSU-03'.

*GS_STUDENT-ZKNAME21 = '###'.

*GS_STUDENT-ZENAME21 = 'SON'.

*GS_STUDENT-ZGUBUN21 = 'F'.

*GS_STUDENT-ZTEL21 = '01033334444'.

*APPEND GS_STUDENT TO GT_STUDENT.

*

*CLEAR : GS_STUDENT.

*

*LOOP AT GT_STUDENT INTO GS_STUDENT.

*

*  "#### ### #### ##

*  IF GS_STUDENT-ZGUBUN21 NE 'M'.

*    DELETE TABLE GT_STUDENT FROM GS_STUDENT.

*

*  "## ## # subrc 0 ###

*    IF SY-SUBRC = 0.

*      ELSE.

*        WRITE :/ '####'.

*     ENDIF.

*   ELSE.

*     WRITE :/ GS_STUDENT-ZCODE21 , GS_STUDENT-ZKNAME21, GS_STUDENT-ZGUBUN21.

*   ENDIF.

*  ENDLOOP.

*  BREAK-POINT.








"TABLE KEY# ### LINE ##






*DATA : GS_STUDENT TYPE ZEDT21_001.

*DATA : GT_STUDENT LIKE TABLE OF GS_STUDENT WITH NON-UNIQUE KEY ZGUBUN21. "# ## ####

*

*GS_STUDENT-ZPERNR21 = '0000000001'.

*GS_STUDENT-ZCODE21 = 'SSU-01'.

*GS_STUDENT-ZKNAME21 = '###'.

*GS_STUDENT-ZENAME21 = 'DONG'.

*GS_STUDENT-ZGUBUN21 = 'M'.

*GS_STUDENT-ZTEL21 = '01011112222'.

*APPEND GS_STUDENT TO GT_STUDENT.

*

*CLEAR : GS_STUDENT.

*

*GS_STUDENT-ZPERNR21 = '0000000002'.

*GS_STUDENT-ZCODE21 = 'SSU-02'.

*GS_STUDENT-ZKNAME21 = '###'.

*GS_STUDENT-ZENAME21 = 'HOON'.

*GS_STUDENT-ZGUBUN21 = 'M'.

*GS_STUDENT-ZTEL21 = '01022223333'.

*APPEND GS_STUDENT TO GT_STUDENT.

*

*CLEAR : GS_STUDENT.

*

*GS_STUDENT-ZPERNR21 = '0000000003'.

*GS_STUDENT-ZCODE21 = 'SSU-03'.

*GS_STUDENT-ZKNAME21 = '###'.

*GS_STUDENT-ZENAME21 = 'SON'.

*GS_STUDENT-ZGUBUN21 = 'F'.

*GS_STUDENT-ZTEL21 = '01033334444'.

*APPEND GS_STUDENT TO GT_STUDENT.

*

*DELETE TABLE GT_STUDENT WITH TABLE KEY ZGUBUN21 = 'F'.

*

*"## #### #### ## ##

*

*  "## ## # subrc 0 ###

*    IF SY-SUBRC = 0.

*      LOOP AT GT_STUDENT INTO GS_STUDENT.

*     WRITE :/ GS_STUDENT-ZCODE21 , GS_STUDENT-ZKNAME21, GS_STUDENT-ZGUBUN21.

*

*  ENDLOOP.

*  ENDIF.

*  BREAK-POINT.






" WHERE ### ### ## ##






*DATA : GS_STUDENT TYPE ZEDT21_001.

*DATA : GT_STUDENT LIKE TABLE OF GS_STUDENT.

*

*GS_STUDENT-ZPERNR21 = '0000000001'.

*GS_STUDENT-ZCODE21 = 'SSU-01'.

*GS_STUDENT-ZKNAME21 = '###'.

*GS_STUDENT-ZENAME21 = 'DONG'.

*GS_STUDENT-ZGUBUN21 = 'M'.

*GS_STUDENT-ZTEL21 = '01011112222'.

*APPEND GS_STUDENT TO GT_STUDENT.

*

*CLEAR : GS_STUDENT.

*

*GS_STUDENT-ZPERNR21 = '0000000002'.

*GS_STUDENT-ZCODE21 = 'SSU-02'.

*GS_STUDENT-ZKNAME21 = '###'.

*GS_STUDENT-ZENAME21 = 'HOON'.

*GS_STUDENT-ZGUBUN21 = 'M'.

*GS_STUDENT-ZTEL21 = '01022223333'.

*APPEND GS_STUDENT TO GT_STUDENT.

*

*CLEAR : GS_STUDENT.

*

*GS_STUDENT-ZPERNR21 = '0000000003'.

*GS_STUDENT-ZCODE21 = 'SSU-03'.

*GS_STUDENT-ZKNAME21 = '###'.

*GS_STUDENT-ZENAME21 = 'SON'.

*GS_STUDENT-ZGUBUN21 = 'F'.

*GS_STUDENT-ZTEL21 = '01033334444'.

*APPEND GS_STUDENT TO GT_STUDENT.

*

*"INTERNAL TABLE WHERE #### ## ## ##

*DELETE GT_STUDENT WHERE ZGUBUN21 = 'F'.

*

*  "## ## # subrc 0 ###

*    IF SY-SUBRC = 0.

*      LOOP AT GT_STUDENT INTO GS_STUDENT.

*     WRITE :/ GS_STUDENT-ZCODE21 , GS_STUDENT-ZKNAME21, GS_STUDENT-ZGUBUN21.

*      ENDLOOP.

*  ENDIF.

*  BREAK-POINT.






  "INDEX # ### ## ##






*

*DATA : GS_STUDENT TYPE ZEDT21_001.

*DATA : GT_STUDENT LIKE TABLE OF GS_STUDENT.

*

*GS_STUDENT-ZPERNR21 = '0000000001'.

*GS_STUDENT-ZCODE21 = 'SSU-01'.

*GS_STUDENT-ZKNAME21 = '###'.

*GS_STUDENT-ZENAME21 = 'DONG'.

*GS_STUDENT-ZGUBUN21 = 'M'.

*GS_STUDENT-ZTEL21 = '01011112222'.

*APPEND GS_STUDENT TO GT_STUDENT.

*

*CLEAR : GS_STUDENT.

*

*GS_STUDENT-ZPERNR21 = '0000000002'.

*GS_STUDENT-ZCODE21 = 'SSU-02'.

*GS_STUDENT-ZKNAME21 = '###'.

*GS_STUDENT-ZENAME21 = 'HOON'.

*GS_STUDENT-ZGUBUN21 = 'M'.

*GS_STUDENT-ZTEL21 = '01022223333'.

*APPEND GS_STUDENT TO GT_STUDENT.

*

*CLEAR : GS_STUDENT.

*

*GS_STUDENT-ZPERNR21 = '0000000003'.

*GS_STUDENT-ZCODE21 = 'SSU-03'.

*GS_STUDENT-ZKNAME21 = '###'.

*GS_STUDENT-ZENAME21 = 'SON'.

*GS_STUDENT-ZGUBUN21 = 'F'.

*GS_STUDENT-ZTEL21 = '01033334444'.

*APPEND GS_STUDENT TO GT_STUDENT.

*

*"2### ##

**DELETE GT_STUDENT INDEX 2. "2#### ##

**DELETE GT_STUDENT FROM 2. "2### ### ##

*DELETE GT_STUDENT TO 2. "#### 2### ##

*  "## ## # subrc 0 ###

*    IF SY-SUBRC = 0.

*      LOOP AT GT_STUDENT INTO GS_STUDENT.

*     WRITE :/ GS_STUDENT-ZCODE21 , GS_STUDENT-ZKNAME21, GS_STUDENT-ZGUBUN21.

*      ENDLOOP.

*  ENDIF.

*  BREAK-POINT.






  "ADJACENT DUPLICATE ### ### ## ## ##



DATA : GS_STUDENT TYPE ZEDT21_001.

DATA : GT_STUDENT LIKE TABLE OF GS_STUDENT.



GS_STUDENT-ZPERNR21 = '0000000001'.

GS_STUDENT-ZCODE21 = 'SSU-01'.

GS_STUDENT-ZKNAME21 = '###'.

GS_STUDENT-ZENAME21 = 'DONG'.

GS_STUDENT-ZGUBUN21 = 'M'.

GS_STUDENT-ZTEL21 = '01011112222'.

APPEND GS_STUDENT TO GT_STUDENT.



CLEAR : GS_STUDENT.

"## ## ###

GS_STUDENT-ZPERNR21 = '0000000001'.

GS_STUDENT-ZCODE21 = 'SSU-01'.

GS_STUDENT-ZKNAME21 = '###'.

GS_STUDENT-ZENAME21 = 'DON'.

GS_STUDENT-ZGUBUN21 = 'M'.

GS_STUDENT-ZTEL21 = '01011112222'.

APPEND GS_STUDENT TO GT_STUDENT.







CLEAR : GS_STUDENT.



GS_STUDENT-ZPERNR21 = '0000000003'.

GS_STUDENT-ZCODE21 = 'SSU-03'.

GS_STUDENT-ZKNAME21 = '###'.

GS_STUDENT-ZENAME21 = 'SON'.

GS_STUDENT-ZGUBUN21 = 'F'.



GS_STUDENT-ZTEL21 = '01033334444'.

APPEND GS_STUDENT TO GT_STUDENT.



SORT GT_STUDENT.






*DELETE ADJACENT DUPLICATES FROM GT_STUDENT. " # ## ## FIELD# #### #### ### 2#### DON ## ###### ## FIELD# ## ####  ### ##




DELETE ADJACENT DUPLICATES FROM GT_STUDENT COMPARING ZCODE21.





IF SY-SUBRC = 0.

  LOOP AT GT_STUDENT INTO GS_STUDENT.

WRITE :/ GS_STUDENT-ZCODE21, GS_STUDENT-ZKNAME21, GS_STUDENT-ZGUBUN21.

ENDLOOP.

ENDIF.



BREAK-POINT.