<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=ISO-8859-1" />
<title>ZEDR25_PRACTICE006</title>
<style type="text/css">
.code{ font-family:"Courier New", Courier, monospace; color:#000; font-size:14px; background-color:#F2F4F7 }
  .codeComment {font-family:"Courier New", Courier, monospace; color:#0000F0; font-size:14px; background-color:#F2F4F7 }
  .normalBold{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:12px; font-weight:800 }
  .normalBoldLarge{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:16px; font-weight:800 }
</style>
<style type="text/css">
  .normal{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:12px }
  .footer{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:12px; text-align: center }
  h2{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:16px; font-weight:800 }
  h3{ font-family:Arial, Helvetica, sans-serif; color:#000; font-size:14px; font-weight:800 }
  .outerTable{
   background-color:#E0E7ED;
   width:100%;
   border-top-width: thin;
   border-right-width: thin;
   border-right-width: thin;
   border-left-width: thin;
   border-top-style: solid;
   border-right-style: solid;
   border-bottom-style: solid;
   border-left-style: solid;
  }
  .innerTable{
   background-color:#F2F4F7;
   width:100%;
   border-top-width: thin;
   border-right-width: thin;
   border-bottom-width: thin;
   border-left-width: thin;
   border-top-style: solid;
   border-right-style: solid;
   border-bottom-style: solid;
   border-left-style: solid;
  }
</style>
</head>
<body>
<table class="outerTable">
  <tr class="normalBoldLarge">
     <td><h2>Code listing for: ZEDR25_PRACTICE006</h2>
<h3> Description: </h3></td>
   </tr>
  <tr>
     <td>
     <table class="innerTable">
       <tr>
          <td>
   <div class="codeComment">
*&---------------------------------------------------------------------*<br />
*&&nbsp;Report&nbsp;ZEDR25_PRACTICE006<br />
*&---------------------------------------------------------------------*<br />
*&<br />
*&---------------------------------------------------------------------*<br />
   </div>
   <div class="code">
REPORT ZEDR25_PRACTICE006 MESSAGE-ID ZMED25.<br />
<br />
TABLES: ZEDT25_102,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZEDT25_103,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZEDT25_104,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZEDT25_105,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZEDT25_106.<br />
<br />
CONSTANTS: C_X      TYPE C VALUE 'X',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C_RANK_A&nbsp;TYPE&nbsp;C&nbsp;VALUE&nbsp;'A',<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C_BONUS&nbsp;&nbsp;TYPE&nbsp;P&nbsp;DECIMALS&nbsp;2&nbsp;VALUE&nbsp;'500.00'.<br />
<br />
DATA: BEGIN OF GS_INFO,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZPERNR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZPERNR,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZPNAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_103-ZPNAME,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZDEPCODE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZDEPCODE,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZDEPCODE_NAME&nbsp;&nbsp;&nbsp;TYPE&nbsp;C&nbsp;LENGTH&nbsp;20,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZDEPRANK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZDEPRANK,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZDEPRANK_NAME&nbsp;&nbsp;&nbsp;TYPE&nbsp;C&nbsp;LENGTH&nbsp;20,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZEDATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZEDATE,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZQDATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZQDATE,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZQFLAG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZQFLAG,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZQFLAG_NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;C&nbsp;LENGTH&nbsp;20,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZGENDER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_103-ZGENDER,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZGENDER_NAME&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;C&nbsp;LENGTH&nbsp;8,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZADDRESS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_103-ZADDRESS,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZBANKCODE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_106-ZBANKCODE,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZBANKCODE_NAME&nbsp;&nbsp;TYPE&nbsp;C&nbsp;LENGTH&nbsp;20,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZACCOUNT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_106-ZACCOUNT,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END&nbsp;OF&nbsp;GS_INFO.<br />
DATA: GT_INFO LIKE TABLE OF GS_INFO.<br />
<br />
DATA: GS_PAY TYPE ZEDT25_105.<br />
<br />
DATA: BEGIN OF GS_PAY_INFO,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZPERNR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZPERNR,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_104-ZYEAR,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZPNAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_103-ZPNAME,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZDEPCODE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZDEPCODE,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZDEPCODE_NAME&nbsp;TYPE&nbsp;C&nbsp;LENGTH&nbsp;20,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZDEPRANK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZDEPRANK,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZDEPRANK_NAME&nbsp;TYPE&nbsp;C&nbsp;LENGTH&nbsp;20,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZEDATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZEDATE,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZQDATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZQDATE,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZQFLAG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZQFLAG,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZSALARY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_106-ZSALARY,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZPAY_MONTH&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_106-ZSALARY,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZRANK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_104-ZRANK,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZBANKCODE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_106-ZBANKCODE,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZBANKCODE_NAME&nbsp;TYPE&nbsp;C&nbsp;LENGTH&nbsp;20,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZMON01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_105-ZMON01,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZMON02&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_105-ZMON02,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZMON03&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_105-ZMON03,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZMON04&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_105-ZMON04,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZMON05&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_105-ZMON05,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZMON06&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_105-ZMON06,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZMON07&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_105-ZMON07,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZMON08&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_105-ZMON08,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZMON09&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_105-ZMON09,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZMON10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_105-ZMON10,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZMON11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_105-ZMON11,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ZMON12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_105-ZMON12,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END&nbsp;OF&nbsp;GS_PAY_INFO.<br />
DATA: GT_PAY_INFO LIKE TABLE OF GS_PAY_INFO.<br />
<br />
DATA: GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GT_FIELDCAT&nbsp;TYPE&nbsp;SLIS_T_FIELDCAT_ALV,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_LAYOUT&nbsp;&nbsp;&nbsp;TYPE&nbsp;SLIS_LAYOUT_ALV,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_SORT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;SLIS_SORTINFO_ALV,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GT_SORT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TYPE&nbsp;SLIS_T_SORTINFO_ALV.<br />
<br />
RANGES : R_FLAG FOR ZEDT25_102-ZQFLAG.<br />
<br />
SELECTION-SCREEN BEGIN OF BLOCK B1 WITH FRAME.<br />
&nbsp;&nbsp;SELECT-OPTIONS&nbsp;:&nbsp;S_ZPERNR&nbsp;FOR&nbsp;ZEDT25_102-ZPERNR&nbsp;MODIF&nbsp;ID&nbsp;COM.<br />
&nbsp;&nbsp;SELECT-OPTIONS&nbsp;:&nbsp;S_ZDATE&nbsp;&nbsp;FOR&nbsp;ZEDT25_102-DATBI&nbsp;&nbsp;MODIF&nbsp;ID&nbsp;EMP.<br />
&nbsp;&nbsp;SELECT-OPTIONS&nbsp;:&nbsp;S_ZDEP&nbsp;&nbsp;&nbsp;FOR&nbsp;ZEDT25_102-ZDEPCODE&nbsp;NO&nbsp;INTERVALS&nbsp;NO-EXTENSION&nbsp;MODIF&nbsp;ID&nbsp;EMP.<br />
&nbsp;&nbsp;PARAMETERS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;P_YEAR&nbsp;&nbsp;&nbsp;TYPE&nbsp;ZEDT25_104-ZYEAR&nbsp;MODIF&nbsp;ID&nbsp;YM,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_MONTH&nbsp;&nbsp;TYPE&nbsp;NUMC2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MODIF&nbsp;ID&nbsp;YM.<br />
SELECTION-SCREEN END OF BLOCK B1.<br />
<br />
SELECTION-SCREEN BEGIN OF BLOCK B2 WITH FRAME.<br />
&nbsp;&nbsp;PARAMETERS&nbsp;:&nbsp;P_R1&nbsp;RADIOBUTTON&nbsp;GROUP&nbsp;R1&nbsp;DEFAULT&nbsp;'X'&nbsp;USER-COMMAND&nbsp;UC1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_R2&nbsp;RADIOBUTTON&nbsp;GROUP&nbsp;R1,<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_R3&nbsp;RADIOBUTTON&nbsp;GROUP&nbsp;R1.<br />
SELECTION-SCREEN END OF BLOCK B2.<br />
<br />
SELECTION-SCREEN BEGIN OF BLOCK B3 WITH FRAME.<br />
&nbsp;&nbsp;PARAMETERS&nbsp;:&nbsp;P_CH1&nbsp;AS&nbsp;CHECKBOX&nbsp;DEFAULT&nbsp;'X'&nbsp;MODIF&nbsp;ID&nbsp;EMP.<br />
SELECTION-SCREEN END OF BLOCK B3.<br />
<br />
INITIALIZATION.<br />
&nbsp;&nbsp;PERFORM&nbsp;SET_DEFAULTS.<br />
<br />
AT SELECTION-SCREEN OUTPUT.<br />
&nbsp;&nbsp;PERFORM&nbsp;SET_SCREEN.<br />
<br />
AT SELECTION-SCREEN.<br />
&nbsp;&nbsp;PERFORM&nbsp;CHECK_INPUT.<br />
<br />
START-OF-SELECTION.<br />
&nbsp;&nbsp;IF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_R1&nbsp;=&nbsp;C_X.&nbsp;PERFORM&nbsp;RUN_INFO.<br />
&nbsp;&nbsp;ELSEIF&nbsp;P_R2&nbsp;=&nbsp;C_X.&nbsp;PERFORM&nbsp;RUN_PAY.<br />
&nbsp;&nbsp;ELSEIF&nbsp;P_R3&nbsp;=&nbsp;C_X.&nbsp;PERFORM&nbsp;RUN_EVAL.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
FORM SET_DEFAULTS .<br />
&nbsp;&nbsp;IF&nbsp;S_ZDATE[]&nbsp;IS&nbsp;INITIAL.<br />
&nbsp;&nbsp;&nbsp;&nbsp;CLEAR&nbsp;S_ZDATE.<br />
&nbsp;&nbsp;&nbsp;&nbsp;S_ZDATE-SIGN&nbsp;&nbsp;&nbsp;=&nbsp;'I'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;S_ZDATE-OPTION&nbsp;=&nbsp;'BT'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;CONCATENATE&nbsp;SY-DATUM(4)&nbsp;'0101'&nbsp;INTO&nbsp;S_ZDATE-LOW.<br />
&nbsp;&nbsp;&nbsp;&nbsp;S_ZDATE-HIGH&nbsp;=&nbsp;SY-DATUM(6)&nbsp;&&&nbsp;'01'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'LAST_DAY_OF_MONTHS'<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING&nbsp;&nbsp;DAY_IN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;S_ZDATE-HIGH<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IMPORTING&nbsp;&nbsp;LAST_DAY_OF_MONTH&nbsp;=&nbsp;S_ZDATE-HIGH.<br />
&nbsp;&nbsp;&nbsp;&nbsp;APPEND&nbsp;S_ZDATE.<br />
&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;IF&nbsp;P_YEAR&nbsp;&nbsp;IS&nbsp;INITIAL.&nbsp;P_YEAR&nbsp;&nbsp;=&nbsp;SY-DATUM(4).&nbsp;ENDIF.<br />
&nbsp;&nbsp;IF&nbsp;P_MONTH&nbsp;IS&nbsp;INITIAL.&nbsp;P_MONTH&nbsp;=&nbsp;SY-DATUM+4(2).&nbsp;ENDIF.<br />
ENDFORM.<br />
<br />
FORM SET_SCREEN .<br />
&nbsp;&nbsp;LOOP&nbsp;AT&nbsp;SCREEN.<br />
&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;P_R1&nbsp;=&nbsp;C_X.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SCREEN-GROUP1&nbsp;=&nbsp;'YM'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SCREEN-ACTIVE&nbsp;=&nbsp;'0'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ELSE.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SCREEN-GROUP1&nbsp;=&nbsp;'EMP'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SCREEN-ACTIVE&nbsp;=&nbsp;'0'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MODIFY&nbsp;SCREEN.<br />
&nbsp;&nbsp;ENDLOOP.<br />
ENDFORM.<br />
<br />
FORM CHECK_INPUT .<br />
&nbsp;&nbsp;IF&nbsp;P_R1&nbsp;=&nbsp;C_X.<br />
&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;S_ZDATE&nbsp;IS&nbsp;INITIAL.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'#####&nbsp;#####.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STOP.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;ELSE.<br />
&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;(&nbsp;P_YEAR&nbsp;IS&nbsp;INITIAL&nbsp;)&nbsp;OR&nbsp;(&nbsp;P_MONTH&nbsp;IS&nbsp;INITIAL&nbsp;).<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'###&nbsp;#####.'&nbsp;TYPE&nbsp;'E'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STOP.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;ENDIF.<br />
ENDFORM.<br />
<br />
FORM MAP_COMMON CHANGING P_DEPCD TYPE ZEDT25_102-ZDEPCODE<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_DEPNM&nbsp;TYPE&nbsp;CHAR20<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_RANK&nbsp;&nbsp;TYPE&nbsp;ZEDT25_102-ZDEPRANK<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_RKNM&nbsp;&nbsp;TYPE&nbsp;CHAR20<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_BNKCD&nbsp;TYPE&nbsp;ZEDT25_106-ZBANKCODE<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_BNKNM&nbsp;TYPE&nbsp;CHAR20.<br />
&nbsp;&nbsp;CASE&nbsp;P_DEPCD.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'SS0001'.&nbsp;P_DEPNM&nbsp;=&nbsp;'###'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'SS0002'.&nbsp;P_DEPNM&nbsp;=&nbsp;'###'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'SS0003'.&nbsp;P_DEPNM&nbsp;=&nbsp;'###'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'SS0004'.&nbsp;P_DEPNM&nbsp;=&nbsp;'###'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'SS0005'.&nbsp;P_DEPNM&nbsp;=&nbsp;'###'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'SS0006'.&nbsp;P_DEPNM&nbsp;=&nbsp;'###'.<br />
&nbsp;&nbsp;ENDCASE.<br />
&nbsp;&nbsp;CASE&nbsp;P_RANK.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'A'.&nbsp;P_RKNM&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'B'.&nbsp;P_RKNM&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'C'.&nbsp;P_RKNM&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'D'.&nbsp;P_RKNM&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'E'.&nbsp;P_RKNM&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'F'.&nbsp;P_RKNM&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'G'.&nbsp;P_RKNM&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;ENDCASE.<br />
&nbsp;&nbsp;CASE&nbsp;P_BNKCD.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'001'.&nbsp;P_BNKNM&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'002'.&nbsp;P_BNKNM&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'003'.&nbsp;P_BNKNM&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'004'.&nbsp;P_BNKNM&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'005'.&nbsp;P_BNKNM&nbsp;=&nbsp;'###'.<br />
&nbsp;&nbsp;ENDCASE.<br />
ENDFORM.<br />
<br />
FORM RUN_INFO .<br />
&nbsp;&nbsp;PERFORM&nbsp;SELECT_INFO.<br />
&nbsp;&nbsp;IF&nbsp;GT_INFO&nbsp;IS&nbsp;INITIAL.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'###&nbsp;####&nbsp;####&nbsp;####.'&nbsp;TYPE&nbsp;'S'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXIT.<br />
&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;PERFORM&nbsp;MODIFY_INFO.<br />
&nbsp;&nbsp;PERFORM&nbsp;ALV_EMP.<br />
ENDFORM.<br />
<br />
FORM SELECT_INFO .<br />
&nbsp;&nbsp;CLEAR&nbsp;R_FLAG.<br />
&nbsp;&nbsp;IF&nbsp;P_CH1&nbsp;=&nbsp;C_X.<br />
&nbsp;&nbsp;&nbsp;&nbsp;R_FLAG-SIGN&nbsp;=&nbsp;'I'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;R_FLAG-OPTION&nbsp;=&nbsp;'EQ'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;R_FLAG-LOW&nbsp;=&nbsp;'&nbsp;'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;APPEND&nbsp;R_FLAG.<br />
&nbsp;&nbsp;ELSE.<br />
&nbsp;&nbsp;&nbsp;&nbsp;R_FLAG-SIGN&nbsp;=&nbsp;'I'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;R_FLAG-OPTION&nbsp;=&nbsp;'EQ'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;R_FLAG-LOW&nbsp;=&nbsp;'&nbsp;'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;APPEND&nbsp;R_FLAG.<br />
&nbsp;&nbsp;&nbsp;&nbsp;R_FLAG-LOW&nbsp;=&nbsp;C_X.<br />
&nbsp;&nbsp;&nbsp;&nbsp;APPEND&nbsp;R_FLAG.<br />
&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;GT_INFO.<br />
<br />
&nbsp;&nbsp;SELECT&nbsp;a~zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b~zpname<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~zdepcode<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~zdeprank<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~zedate<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~zqflag<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b~zgender<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b~zaddress<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c~zbankcode<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c~zaccount<br />
&nbsp;&nbsp;&nbsp;&nbsp;INTO&nbsp;CORRESPONDING&nbsp;FIELDS&nbsp;OF&nbsp;TABLE&nbsp;gt_info<br />
&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;zedt25_102&nbsp;AS&nbsp;a<br />
&nbsp;&nbsp;&nbsp;&nbsp;INNER&nbsp;JOIN&nbsp;zedt25_103&nbsp;AS&nbsp;b&nbsp;ON&nbsp;a~zpernr&nbsp;=&nbsp;b~zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;INNER&nbsp;JOIN&nbsp;zedt25_106&nbsp;AS&nbsp;c&nbsp;ON&nbsp;a~zpernr&nbsp;=&nbsp;c~zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;a~zpernr&nbsp;IN&nbsp;s_zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;a~datbi&nbsp;&lt;=&nbsp;s_zdate-high<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;a~datab&nbsp;&gt;&nbsp;s_zdate-high<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;a~zdepcode&nbsp;IN&nbsp;s_zdep<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;a~zqflag&nbsp;IN&nbsp;r_flag.<br />
<br />
ENDFORM.<br />
<br />
FORM MODIFY_INFO .<br />
&nbsp;&nbsp;LOOP&nbsp;AT&nbsp;GT_INFO&nbsp;INTO&nbsp;GS_INFO.<br />
&nbsp;&nbsp;&nbsp;&nbsp;PERFORM&nbsp;MAP_COMMON&nbsp;CHANGING&nbsp;GS_INFO-ZDEPCODE&nbsp;GS_INFO-ZDEPCODE_NAME<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_INFO-ZDEPRANK&nbsp;GS_INFO-ZDEPRANK_NAME<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_INFO-ZBANKCODE&nbsp;GS_INFO-ZBANKCODE_NAME.<br />
&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;GS_INFO-ZQFLAG&nbsp;=&nbsp;C_X.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_INFO-ZQFLAG_NAME&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ELSE.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_INFO-ZQFLAG_NAME&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;GS_INFO-ZGENDER&nbsp;=&nbsp;'M'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_INFO-ZGENDER_NAME&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ELSEIF&nbsp;GS_INFO-ZGENDER&nbsp;=&nbsp;'F'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_INFO-ZGENDER_NAME&nbsp;=&nbsp;'##'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MODIFY&nbsp;GT_INFO&nbsp;FROM&nbsp;GS_INFO.<br />
&nbsp;&nbsp;ENDLOOP.<br />
ENDFORM.<br />
<br />
FORM ALV_EMP .<br />
&nbsp;&nbsp;REFRESH:&nbsp;GT_FIELDCAT,&nbsp;GT_SORT.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZPERNR'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'####'&nbsp;&nbsp;&nbsp;10&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZPNAME'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'####'&nbsp;&nbsp;&nbsp;14&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZDEPCODE'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'####'&nbsp;&nbsp;&nbsp;10&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZDEPCODE_NAME'&nbsp;&nbsp;'###'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZDEPRANK_NAME'&nbsp;&nbsp;'###'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZEDATE'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'###'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZQFLAG_NAME'&nbsp;&nbsp;&nbsp;&nbsp;'####'&nbsp;&nbsp;&nbsp;&nbsp;8&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZGENDER_NAME'&nbsp;&nbsp;&nbsp;'##'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZADDRESS'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'##'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;30&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZBANKCODE'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'####'&nbsp;&nbsp;&nbsp;&nbsp;8&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZBANKCODE_NAME'&nbsp;'###'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;12&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZACCOUNT'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'####'&nbsp;&nbsp;&nbsp;20&nbsp;SPACE.<br />
&nbsp;&nbsp;CLEAR&nbsp;GS_SORT.&nbsp;GS_SORT-SPOS&nbsp;=&nbsp;1.&nbsp;GS_SORT-FIELDNAME&nbsp;=&nbsp;'ZPERNR'.&nbsp;GS_SORT-UP&nbsp;=&nbsp;'X'.&nbsp;APPEND&nbsp;GS_SORT&nbsp;TO&nbsp;GT_SORT.<br />
&nbsp;&nbsp;GS_LAYOUT-ZEBRA&nbsp;=&nbsp;C_X.<br />
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'REUSE_ALV_GRID_DISPLAY'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IT_FIELDCAT&nbsp;=&nbsp;GT_FIELDCAT<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IS_LAYOUT&nbsp;&nbsp;&nbsp;=&nbsp;GS_LAYOUT<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IT_SORT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;GT_SORT<br />
&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T_OUTTAB&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;GT_INFO.<br />
ENDFORM.<br />
<br />
FORM RUN_PAY .<br />
&nbsp;&nbsp;PERFORM&nbsp;SELECT_PAY.<br />
&nbsp;&nbsp;IF&nbsp;GT_PAY_INFO&nbsp;IS&nbsp;INITIAL.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'##&nbsp;###&nbsp;####.'&nbsp;TYPE&nbsp;'S'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXIT.<br />
&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;PERFORM&nbsp;MODIFY_PAY.<br />
ENDFORM.<br />
<br />
FORM SELECT_PAY .<br />
&nbsp;&nbsp;DATA:&nbsp;LV_DATE&nbsp;TYPE&nbsp;ZEDT25_102-DATBI.<br />
&nbsp;&nbsp;CLEAR&nbsp;:&nbsp;LV_DATE.<br />
&nbsp;&nbsp;CONCATENATE&nbsp;P_YEAR&nbsp;P_MONTH&nbsp;'01'&nbsp;INTO&nbsp;LV_DATE.<br />
<br />
&nbsp;&nbsp;CLEAR&nbsp;GT_PAY_INFO.<br />
<br />
&nbsp;&nbsp;SELECT&nbsp;a~zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~zqdate<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~zqflag<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b~zrank<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c~zsalary<br />
&nbsp;&nbsp;&nbsp;&nbsp;INTO&nbsp;CORRESPONDING&nbsp;FIELDS&nbsp;OF&nbsp;TABLE&nbsp;gt_pay_info<br />
&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;zedt25_102&nbsp;AS&nbsp;a<br />
&nbsp;&nbsp;&nbsp;&nbsp;INNER&nbsp;JOIN&nbsp;zedt25_104&nbsp;AS&nbsp;b&nbsp;ON&nbsp;a~zpernr&nbsp;=&nbsp;b~zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;INNER&nbsp;JOIN&nbsp;zedt25_106&nbsp;AS&nbsp;c&nbsp;ON&nbsp;a~zpernr&nbsp;=&nbsp;c~zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;a~zpernr&nbsp;IN&nbsp;s_zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;b~zyear&nbsp;=&nbsp;p_year<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;c~zyear&nbsp;=&nbsp;p_year<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;b~datbi&nbsp;&lt;=&nbsp;lv_date.<br />
<br />
ENDFORM.<br />
<br />
FORM MODIFY_PAY .<br />
&nbsp;&nbsp;DATA:&nbsp;LV_DATE2(6),<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LV_CHECK&nbsp;TYPE&nbsp;C.<br />
&nbsp;&nbsp;CLEAR:&nbsp;LV_DATE2.<br />
&nbsp;&nbsp;CONCATENATE&nbsp;P_YEAR&nbsp;P_MONTH&nbsp;INTO&nbsp;LV_DATE2.<br />
<br />
&nbsp;&nbsp;LOOP&nbsp;AT&nbsp;GT_PAY_INFO&nbsp;INTO&nbsp;GS_PAY_INFO.<br />
&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;GS_PAY_INFO-ZQFLAG&nbsp;=&nbsp;C_X.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;GS_PAY_INFO-ZQDATE+0(6)&nbsp;&lt;=&nbsp;LV_DATE2.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CONTINUE.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;GS_PAY_INFO-ZPAY_MONTH&nbsp;=&nbsp;GS_PAY_INFO-ZSALARY&nbsp;/&nbsp;12.<br />
&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;GS_PAY_INFO-ZRANK&nbsp;=&nbsp;'A'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_PAY_INFO-ZPAY_MONTH&nbsp;=&nbsp;GS_PAY_INFO-ZPAY_MONTH&nbsp;+&nbsp;C_BONUS.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;CHECK&nbsp;GS_PAY_INFO-ZPAY_MONTH&nbsp;NE&nbsp;0.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;PERFORM&nbsp;UPDATE_PAY&nbsp;USING&nbsp;P_YEAR&nbsp;P_MONTH<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_PAY_INFO-ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_PAY_INFO-ZPAY_MONTH<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CHANGING&nbsp;LV_CHECK.<br />
&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;LV_CHECK&nbsp;=&nbsp;C_X.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STOP.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;ENDLOOP.<br />
<br />
&nbsp;&nbsp;IF&nbsp;LV_CHECK&nbsp;=&nbsp;C_X.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'####&nbsp;##&nbsp;##'&nbsp;TYPE&nbsp;'S'.<br />
&nbsp;&nbsp;ELSE.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;|{&nbsp;P_YEAR&nbsp;}#&nbsp;{&nbsp;P_MONTH&nbsp;}#&nbsp;####&nbsp;##|&nbsp;TYPE&nbsp;'S'.<br />
&nbsp;&nbsp;ENDIF.<br />
ENDFORM.<br />
<br />
FORM UPDATE_PAY USING PV_YEAR PV_MON P_ZPERNR P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CHANGING&nbsp;PV_CHECK.<br />
<br />
&nbsp;&nbsp;CASE&nbsp;PV_MON.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'01'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;ZEDT25_105&nbsp;SET&nbsp;ZMON01&nbsp;=&nbsp;P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;NE&nbsp;0.&nbsp;PV_CHECK&nbsp;=&nbsp;C_X.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'02'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;ZEDT25_105&nbsp;SET&nbsp;ZMON02&nbsp;=&nbsp;P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;NE&nbsp;0.&nbsp;PV_CHECK&nbsp;=&nbsp;C_X.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'03'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;ZEDT25_105&nbsp;SET&nbsp;ZMON03&nbsp;=&nbsp;P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;NE&nbsp;0.&nbsp;PV_CHECK&nbsp;=&nbsp;C_X.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'04'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;ZEDT25_105&nbsp;SET&nbsp;ZMON04&nbsp;=&nbsp;P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;NE&nbsp;0.&nbsp;PV_CHECK&nbsp;=&nbsp;C_X.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'05'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;ZEDT25_105&nbsp;SET&nbsp;ZMON05&nbsp;=&nbsp;P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;NE&nbsp;0.&nbsp;PV_CHECK&nbsp;=&nbsp;C_X.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'06'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;ZEDT25_105&nbsp;SET&nbsp;ZMON06&nbsp;=&nbsp;P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;NE&nbsp;0.&nbsp;PV_CHECK&nbsp;=&nbsp;C_X.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'07'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;ZEDT25_105&nbsp;SET&nbsp;ZMON07&nbsp;=&nbsp;P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;NE&nbsp;0.&nbsp;PV_CHECK&nbsp;=&nbsp;C_X.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'08'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;ZEDT25_105&nbsp;SET&nbsp;ZMON08&nbsp;=&nbsp;P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;NE&nbsp;0.&nbsp;PV_CHECK&nbsp;=&nbsp;C_X.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'09'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;ZEDT25_105&nbsp;SET&nbsp;ZMON09&nbsp;=&nbsp;P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;NE&nbsp;0.&nbsp;PV_CHECK&nbsp;=&nbsp;C_X.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'10'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;ZEDT25_105&nbsp;SET&nbsp;ZMON10&nbsp;=&nbsp;P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;NE&nbsp;0.&nbsp;PV_CHECK&nbsp;=&nbsp;C_X.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'11'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;ZEDT25_105&nbsp;SET&nbsp;ZMON11&nbsp;=&nbsp;P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;NE&nbsp;0.&nbsp;PV_CHECK&nbsp;=&nbsp;C_X.&nbsp;ENDIF.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'12'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UPDATE&nbsp;ZEDT25_105&nbsp;SET&nbsp;ZMON12&nbsp;=&nbsp;P_ZPAY<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;&nbsp;&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;SY-SUBRC&nbsp;NE&nbsp;0.&nbsp;PV_CHECK&nbsp;=&nbsp;C_X.&nbsp;ENDIF.<br />
&nbsp;&nbsp;ENDCASE.<br />
<br />
ENDFORM.<br />
<br />
FORM RUN_EVAL .<br />
&nbsp;&nbsp;PERFORM&nbsp;SELECT_EVAL.<br />
&nbsp;&nbsp;IF&nbsp;GT_PAY_INFO&nbsp;IS&nbsp;INITIAL.<br />
&nbsp;&nbsp;&nbsp;&nbsp;MESSAGE&nbsp;'###&nbsp;####&nbsp;####.'&nbsp;TYPE&nbsp;'S'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXIT.<br />
&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;PERFORM&nbsp;MODIFY_EVAL.<br />
&nbsp;&nbsp;PERFORM&nbsp;ALV_EVAL.<br />
ENDFORM.<br />
<br />
FORM SELECT_EVAL .<br />
&nbsp;&nbsp;CLEAR&nbsp;GT_PAY_INFO.<br />
<br />
&nbsp;&nbsp;SELECT&nbsp;a~zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b~zpname<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~zdepcode<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~zdeprank<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a~zedate<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c~zrank<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d~zsalary<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d~zbankcode<br />
&nbsp;&nbsp;&nbsp;&nbsp;INTO&nbsp;CORRESPONDING&nbsp;FIELDS&nbsp;OF&nbsp;TABLE&nbsp;gt_pay_info<br />
&nbsp;&nbsp;&nbsp;&nbsp;FROM&nbsp;zedt25_102&nbsp;AS&nbsp;a<br />
&nbsp;&nbsp;&nbsp;&nbsp;INNER&nbsp;JOIN&nbsp;zedt25_103&nbsp;AS&nbsp;b&nbsp;ON&nbsp;a~zpernr&nbsp;=&nbsp;b~zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;INNER&nbsp;JOIN&nbsp;zedt25_104&nbsp;AS&nbsp;c&nbsp;ON&nbsp;a~zpernr&nbsp;=&nbsp;c~zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;INNER&nbsp;JOIN&nbsp;zedt25_106&nbsp;AS&nbsp;d&nbsp;ON&nbsp;a~zpernr&nbsp;=&nbsp;d~zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;a~zpernr&nbsp;IN&nbsp;s_zpernr<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;c~zyear&nbsp;=&nbsp;p_year<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AND&nbsp;d~zyear&nbsp;=&nbsp;p_year.<br />
<br />
ENDFORM.<br />
<br />
FORM MODIFY_EVAL .<br />
&nbsp;&nbsp;LOOP&nbsp;AT&nbsp;GT_PAY_INFO&nbsp;INTO&nbsp;GS_PAY_INFO.<br />
&nbsp;&nbsp;&nbsp;&nbsp;PERFORM&nbsp;GET_PAY&nbsp;USING&nbsp;P_YEAR&nbsp;P_MONTH<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_PAY_INFO-ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CHANGING&nbsp;GS_PAY_INFO-ZPAY_MONTH.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;PERFORM&nbsp;MAP_COMMON&nbsp;CHANGING&nbsp;GS_PAY_INFO-ZDEPCODE&nbsp;GS_PAY_INFO-ZDEPCODE_NAME<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_PAY_INFO-ZDEPRANK&nbsp;GS_PAY_INFO-ZDEPRANK_NAME<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GS_PAY_INFO-ZBANKCODE&nbsp;GS_PAY_INFO-ZBANKCODE_NAME.<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;IF&nbsp;GS_PAY_INFO-ZPAY_MONTH&nbsp;NE&nbsp;0.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MODIFY&nbsp;GT_PAY_INFO&nbsp;FROM&nbsp;GS_PAY_INFO.<br />
&nbsp;&nbsp;&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;ENDLOOP.<br />
<br />
&nbsp;&nbsp;DELETE&nbsp;GT_PAY_INFO&nbsp;WHERE&nbsp;ZPAY_MONTH&nbsp;=&nbsp;0&nbsp;OR&nbsp;ZPAY_MONTH&nbsp;IS&nbsp;INITIAL.<br />
ENDFORM.<br />
<br />
FORM GET_PAY USING PV_YEAR PV_MON P_ZPERNR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CHANGING&nbsp;P_ZMON.<br />
<br />
&nbsp;&nbsp;CASE&nbsp;PV_MON.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'01'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;SINGLE&nbsp;ZMON01&nbsp;FROM&nbsp;ZEDT25_105&nbsp;INTO&nbsp;P_ZMON<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR&nbsp;AND&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'02'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;SINGLE&nbsp;ZMON02&nbsp;FROM&nbsp;ZEDT25_105&nbsp;INTO&nbsp;P_ZMON<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR&nbsp;AND&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'03'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;SINGLE&nbsp;ZMON03&nbsp;FROM&nbsp;ZEDT25_105&nbsp;INTO&nbsp;P_ZMON<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR&nbsp;AND&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'04'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;SINGLE&nbsp;ZMON04&nbsp;FROM&nbsp;ZEDT25_105&nbsp;INTO&nbsp;P_ZMON<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR&nbsp;AND&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'05'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;SINGLE&nbsp;ZMON05&nbsp;FROM&nbsp;ZEDT25_105&nbsp;INTO&nbsp;P_ZMON<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR&nbsp;AND&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'06'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;SINGLE&nbsp;ZMON06&nbsp;FROM&nbsp;ZEDT25_105&nbsp;INTO&nbsp;P_ZMON<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR&nbsp;AND&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'07'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;SINGLE&nbsp;ZMON07&nbsp;FROM&nbsp;ZEDT25_105&nbsp;INTO&nbsp;P_ZMON<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR&nbsp;AND&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'08'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;SINGLE&nbsp;ZMON08&nbsp;FROM&nbsp;ZEDT25_105&nbsp;INTO&nbsp;P_ZMON<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR&nbsp;AND&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'09'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;SINGLE&nbsp;ZMON09&nbsp;FROM&nbsp;ZEDT25_105&nbsp;INTO&nbsp;P_ZMON<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR&nbsp;AND&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'10'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;SINGLE&nbsp;ZMON10&nbsp;FROM&nbsp;ZEDT25_105&nbsp;INTO&nbsp;P_ZMON<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR&nbsp;AND&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'11'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;SINGLE&nbsp;ZMON11&nbsp;FROM&nbsp;ZEDT25_105&nbsp;INTO&nbsp;P_ZMON<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR&nbsp;AND&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;&nbsp;&nbsp;WHEN&nbsp;'12'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SELECT&nbsp;SINGLE&nbsp;ZMON12&nbsp;FROM&nbsp;ZEDT25_105&nbsp;INTO&nbsp;P_ZMON<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;ZPERNR&nbsp;=&nbsp;P_ZPERNR&nbsp;AND&nbsp;ZYEAR&nbsp;=&nbsp;PV_YEAR.<br />
&nbsp;&nbsp;ENDCASE.<br />
<br />
ENDFORM.<br />
<br />
FORM ALV_EVAL .<br />
&nbsp;&nbsp;DATA&nbsp;L_TXT&nbsp;TYPE&nbsp;CHAR50.<br />
<br />
&nbsp;&nbsp;REFRESH:&nbsp;GT_FIELDCAT,&nbsp;GT_SORT.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZPERNR'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'####'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZPNAME'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'####'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;14&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZDEPCODE_NAME'&nbsp;'###'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;16&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZDEPRANK_NAME'&nbsp;'###'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10&nbsp;SPACE.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZRANK'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'####'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;SPACE.<br />
&nbsp;&nbsp;CLEAR&nbsp;L_TXT.<br />
&nbsp;&nbsp;CONCATENATE&nbsp;P_MONTH&nbsp;'####'&nbsp;INTO&nbsp;L_TXT.<br />
&nbsp;&nbsp;PERFORM&nbsp;ADD_FCAT&nbsp;USING&nbsp;'ZPAY_MONTH'&nbsp;L_TXT&nbsp;16&nbsp;C_X.<br />
&nbsp;&nbsp;CLEAR&nbsp;GS_SORT.&nbsp;GS_SORT-SPOS&nbsp;=&nbsp;1.&nbsp;GS_SORT-FIELDNAME&nbsp;=&nbsp;'ZPERNR'.&nbsp;GS_SORT-UP&nbsp;=&nbsp;C_X.&nbsp;APPEND&nbsp;GS_SORT&nbsp;TO&nbsp;GT_SORT.<br />
&nbsp;&nbsp;GS_LAYOUT-ZEBRA&nbsp;=&nbsp;C_X.<br />
&nbsp;&nbsp;CALL&nbsp;FUNCTION&nbsp;'REUSE_ALV_GRID_DISPLAY'<br />
&nbsp;&nbsp;&nbsp;&nbsp;EXPORTING<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IT_FIELDCAT&nbsp;=&nbsp;GT_FIELDCAT<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IS_LAYOUT&nbsp;&nbsp;&nbsp;=&nbsp;GS_LAYOUT<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IT_SORT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;GT_SORT<br />
&nbsp;&nbsp;&nbsp;&nbsp;TABLES<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;T_OUTTAB&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;GT_PAY_INFO.<br />
ENDFORM.<br />
<br />
FORM ADD_FCAT USING    P_FNAME TYPE CHAR30<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_TEXT&nbsp;&nbsp;TYPE&nbsp;CHAR50<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_OUT&nbsp;&nbsp;&nbsp;TYPE&nbsp;I<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;P_SUM&nbsp;&nbsp;&nbsp;TYPE&nbsp;C.<br />
&nbsp;&nbsp;CLEAR&nbsp;GS_FIELDCAT.<br />
&nbsp;&nbsp;GS_FIELDCAT-FIELDNAME&nbsp;=&nbsp;P_FNAME.<br />
&nbsp;&nbsp;GS_FIELDCAT-SELTEXT_M&nbsp;=&nbsp;P_TEXT.<br />
&nbsp;&nbsp;IF&nbsp;P_OUT&nbsp;IS&nbsp;NOT&nbsp;INITIAL.<br />
&nbsp;&nbsp;&nbsp;&nbsp;GS_FIELDCAT-OUTPUTLEN&nbsp;=&nbsp;P_OUT.<br />
&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;IF&nbsp;P_SUM&nbsp;=&nbsp;C_X.<br />
&nbsp;&nbsp;&nbsp;&nbsp;GS_FIELDCAT-DO_SUM&nbsp;=&nbsp;'X'.<br />
&nbsp;&nbsp;&nbsp;&nbsp;GS_FIELDCAT-CURRENCY&nbsp;=&nbsp;'KRW'.<br />
&nbsp;&nbsp;ENDIF.<br />
&nbsp;&nbsp;APPEND&nbsp;GS_FIELDCAT&nbsp;TO&nbsp;GT_FIELDCAT.<br />
ENDFORM.<br />
<br />
<br />
   </div>
   <div class="codeComment">
*Messages<br />
*----------------------------------------------------------<br />
*<br />
*&nbsp;Message&nbsp;class:&nbsp;Hard&nbsp;coded<br />
*&nbsp;&nbsp;&nbsp;#####&nbsp;#####.<br />
            </div>
          </td>
        </tr>
      </table>
      </td>
      </tr>
   <tr>
<td class="footer">Extracted by Mass Download version 1.5.5 - E.G.Mellodew. 1998-2025. Sap Release 750</td>
   </tr>
</table>
</body>
</html>
